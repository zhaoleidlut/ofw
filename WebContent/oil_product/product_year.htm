<div id="product_year" class="easyui-layout" fit="true">
	<!--  <div region="north"
		style="overflow:hidden;height: 60px; padding: 10px">
		<h2>Layout in Panel</h2>
	</div> -->
	<div region="center" icon="icon-reload">
		<div id='product_year_pannel' class="easyui-panel" fit="true">

		</div>
	</div>
	<div region="west" title="油井选择" split="true" style="width: 200px;">
	</div>
</div>
<script type="text/javascript">
	$(function() {
		var westRegion = $('#product_year>div[region=west]');

		var myTree = $('<div></div>').appendTo(westRegion);

		var treeData;
		$.ajax({
			async : false,
			url : 'getWellTreeInfo.html',
			type : 'post',
			cache : true,
			dataType : 'json',
			success : function(data) {
				treeData = [ data ];
			}
		});
		
		var iportal = $('#product_year_pannel');
		iportal.portal({
			border : false,
			fit : true
		});	

		myTree.tree({
			data : treeData,
			animate : true,
			//checkbox : true,
			onClick : function(node) {
				if (typeof (node.attributes) != 'undefined'
						&& typeof (node.attributes.iswell) != 'undefined'
						&& node.attributes.iswell) {

							createSGTContent(node);
				}
			}
		});
		
	

		function createSGTContent(node) {

			var wellNum = node.text;

			var chongcheng = '4';
			var chongci = '2';
			var minZaihe = '12.3';
			var maxZaihe = '34';
			var time = '2012-05-23 13:30:31';

			var ajaxDataRenderer = function(url) {
				var ret = null;
				$.ajax({
					async : false,
					url : url,
					type : 'post',
					cache : true,
					dataType : 'json',
					data : 'wellNum=' + wellNum,
					success : function(data) {
						ret = data.data;
						chongcheng = data.chongcheng;
						chongci = data.chongci;
						minZaihe = data.minzaihe;
						maxZaihe = data.maxzaihe;
						time = data.time;
					}
				});
				return ret;
			};

			var options = {
				title : wellNum + '产液量年统计',
				seriesDefaults : {
					showLine : true,
					rendererOptions : {
						smooth : true
					},
					lineWidth : 2,
					showMarker : false
				},
				series : [ {
					color : '#A020F0'
				} ],
				sortData : false,
				axes : {
					xaxis : {
						label : "位移（米）",
						labelRenderer : $.jqplot.CanvasAxisLabelRenderer,
					},
					yaxis : {
						label : "载荷（千牛）",
						labelRenderer : $.jqplot.CanvasAxisLabelRenderer
					}
				},
				highlighter : {
					show : true
				},
				cursor : {
					show : true,
					zoom : true
				}
			};

			var jsonurl = 'getSGTPlotData.html';
			
			//var plot = $.jqplot('product_year_pannel', ajaxDataRenderer(jsonurl), options);
			
			$.jqplot.config.enablePlugins = true;
	        var s1 = [1050, 1000, 1020, 1060, 1080, 980, 1010, 1020, 1000];
	        var ticks = ['三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月'];
	         
	        plot1 = $.jqplot('product_year_pannel', [s1], {
	            // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
	           // animate: !$.jqplot.use_excanvas,
	           animate: true,
	            seriesDefaults:{
	                renderer:$.jqplot.BarRenderer,
	                pointLabels: { show: true }
	            },
	            title : wellNum + ' 产液量年统计',
	            axes: {
	                xaxis: {
	                    renderer: $.jqplot.CategoryAxisRenderer,
	                    ticks: ticks
	                }
	            },
	            highlighter: { show: false }
	        });

		}
		
		

	});
</script>